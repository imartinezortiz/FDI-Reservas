<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.springframework.org/security/tags">
<head>
	<meta charset="utf-8"/>
	<title>Listado de espacios</title>
</head>
<body>

            <div class="container-fluid" th:fragment="contenido">
<!-- Page Heading -->
<div class="row">
    <div class="col-lg-12">
        <h1 class="page-header text-center">
            <small>Reserva un espacio en tan sólo 3 pasos.</small>
        </h1>
    </div>
</div>
<!-- /.row -->

<div class="row">
    <div class="col-md-6">
         <h3><span class="red">1</span> Selecciona un edificio.</h3><br/>
    </div>                   
</div>
<!-- /.row -->

	<div class="row">
	    <label> Facultad :</label>
		<select id="selec_facultades">
	    	<option th:each="f : ${Facultades}" th:text="${f.nombreFacultad}" th:value="${f.id}"></option>
	    </select> 
	    <label> Edificio :</label>
	    <select id="selec_edificios">
	    	<option th:each="e : ${allBuildings}" th:text="${e.nombre_edificio}" th:value="${e.id}"></option>
	    </select>                
	</div>
	<!-- /.row -->
	
	 <div class="row">
	    <div class="col-md-12 text-right page-header">
	         <a id="edificio_link" th:href="@{'edificio/1/espacios'}"><button type="button" class="btn-rec blue">SIGUIENTE <i class="fa fa-angle-right"></i></button></a>
	    </div>                   
	</div>
	<!-- /.row -->


<script>

$("#selec_edificios").change(function(){
	var id_edificio = $("#selec_edificios").val();
	var link = 'edificio/' + id_edificio + '/espacios';
	$("#edificio_link").attr("href",link);
	
});
	

	$("#selec_facultades").change(function(){
		var idFacultad = $("#selec_facultades").val();
		
		$.ajax({
			url: '/reservas/facultad/' + idFacultad,
			type: 'GET',
			contentType: 'application/json',
			success : function(datos) {
				
				$("#selec_edificios").empty();
				for(var i in datos){
					var text = datos[i].nombre_edificio;
					var value = datos[i].id;
					$("#selec_edificios").append(new Option(text, value));	
				}
			    
			},    
		    error : function(xhr, status) {
		        alert('Disculpe, existió un problema');
		    }
		});
		
	});
	

</script>
 </div>

            <!-- /.container-fluid -->

</body>
</html>	
